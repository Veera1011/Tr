<div class="trainee-form-container">
  <h2>Add Trainee</h2>
  <form [formGroup]="traineeform" (ngSubmit)="addTrainee()">
    
    <!-- Employee Selection -->
    <div class="form-group">
      <label for="employeeId">Select Employee *</label>
      <div class="employee-search">
        <input 
          type="text"
          [(ngModel)]="searchTerm"
          [ngModelOptions]="{standalone: true}"
          (ngModelChange)="searchEmployees()"
          placeholder="Search employee by name, ID, or email..."
          class="search-input"
          (focus)="showDropdown = true">
        
        <div class="employee-dropdown" *ngIf="showDropdown && filteredEmployees.length > 0">
          <div 
            class="employee-item" 
            *ngFor="let emp of filteredEmployees"
            (click)="selectEmployee(emp)">
            <div class="emp-info">
              <strong>{{ emp.employeeId }}</strong> - {{ emp.employeeName }}
              <small>{{ emp.email }} | {{ emp.department }}</small>
            </div>
          </div>
        </div>
      </div>
      
      <div class="selected-employee" *ngIf="selectedEmployee">
        <span class="emp-badge">
          <strong>{{ selectedEmployee.employeeId }}</strong> - {{ selectedEmployee.employeeName }}
          <button type="button" class="clear-btn" (click)="clearEmployee()">Ã—</button>
        </span>
      </div>
      
      <span class="error" *ngIf="traineeform.get('employeeId')?.invalid && traineeform.get('employeeId')?.touched">
        Please select an employee
      </span>
    </div>

    <div class="form-group">
      <label for="trainingName">Training Name *</label>
      <select 
        id="trainingName"
        formControlName="TrainingName"
        [class.invalid]="traineeform.get('TrainingName')?.invalid && traineeform.get('TrainingName')?.touched">
        <option value="">Select Training</option>
        <option *ngFor="let t of trainings" [value]="t">{{ t }}</option>
      </select>
      <span class="error" *ngIf="traineeform.get('TrainingName')?.invalid && traineeform.get('TrainingName')?.touched">
        Training name is required
      </span>
    </div>

    <div class="form-group">
      <label for="startDate">Start Date *</label>
      <input 
        id="startDate"
        type="date" 
        formControlName="StartDate"
        [class.invalid]="traineeform.get('StartDate')?.invalid && traineeform.get('StartDate')?.touched" />
      <span class="error" *ngIf="traineeform.get('StartDate')?.invalid && traineeform.get('StartDate')?.touched">
        Start date is required
      </span>
    </div>

    <div class="form-group">
      <label for="endDate">End Date (optional)</label>
      <input 
        id="endDate"
        type="date" 
        formControlName="EndDate" />
    </div>

    <div class="form-group">
      <label for="status">Status *</label>
      <select 
        id="status"
        formControlName="Status"
        [class.invalid]="traineeform.get('Status')?.invalid && traineeform.get('Status')?.touched">
        <option value="">Select Status</option>
        <option *ngFor="let s of status" [value]="s">{{ s }}</option>
      </select>
      <span class="error" *ngIf="traineeform.get('Status')?.invalid && traineeform.get('Status')?.touched">
        Status is required
      </span>
    </div>

    <div class="button-group">
      <button type="submit" class="btn-primary" [disabled]="traineeform.invalid">
        Submit
      </button>
      <button type="button" class="btn-secondary" (click)="resetForm()">
        Reset
      </button>
    </div>
  </form>
</div>

<ng-content></ng-content>